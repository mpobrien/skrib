<html>
	<body>
		<style>
            body{
                font-family: Arial;
            }

            .board{
                border:1px solid black;
            }
			.board td{
				width:30px;
				height:30px;
				border: 1px solid black;
                background: #eee;
			}

			.board td.DOUBLE_LETTER{
                background: #AFEEEE url('/static/img/2L.png') no-repeat center;
			}

			.board td.DOUBLE_WORD{
                background: #FFC0CB url('/static/img/2W.png') no-repeat center;
			}

			.board td.gridCenter{
                background: #FFC0CB url('/static/img/center.png') no-repeat center;
			}

			.board td.TRIPLE_LETTER{
                background: #4169E1 url('/static/img/3L.png') no-repeat center;
			}

			.board td.TRIPLE_WORD{
                background: #FF0000 url('/static/img/3W.png') no-repeat center;
			}

            .tile{
                width:30px;
                height:28px;
                border:1px solid black;
                text-align:center;
                vertical-align: middle;
                line-height:30px;
                margin:3px;
                float:left;
                background-color:#F9FF52;
                font-weight:bold;
            }

            .dragging{
                z-index:1000;
            }
            .score{
                position:relative;
                top:20%;
                left: 4px;
                font-size:10px;
                font-weight:bold;
                font-family: Verdana;
            }
            .letter{
                left:50%;
                position:relative;
                left: 4px;
            }

            .occupied{}
		</style>

		${board}

        <div id="letters"> 
            <div id="sortable"> 
                <div class="tile"><span class="letter">A</span><span class="score">1</span></div> 
                <div class="tile"><span class="letter">B</span><span class="score">3</span></div> 
                <div class="tile"><span class="letter">C</span><span class="score">2</span></div> 
                <div class="tile"><span class="letter">D</span><span class="score">2</span></div> 
            </div> 
        </div> 

        <script type="text/javascript" src="/static/js/jquery-1.4.2.min.js"></script>
        <script type="text/javascript"> 
        var dragItem;
        var dragOffsetX;
        var dragOffsetY;
        var positionsX = []
        var positionsY = []
        $(document).ready(function() {
            $('.tile').mousedown(function(e){
                e.preventDefault()
                dragItem = this;
                offset = $(this).offset()
                dragOffsetX = e.pageX - offset.left;
                dragOffsetY = e.pageY - offset.top;
                $(this).addClass('dragging')
                $(document).bind('mousemove',
                    function(e){
                        $(dragItem).offset( {top: e.pageY - dragOffsetY, left: e.pageX - dragOffsetX} );
                    }
                )
            })

            function distance(o1, o2){
                var x = o1.top - o2.top
                var y = o1.left - o2.left
                return Math.sqrt(x*x + y*y)
            }

            $(document).mouseup(
                function(e){
                    mindist = null;
                    gridspots = $('#mainboard td')
                    tilePos = $(dragItem).offset()
                    closest = null
                    for( var g=0;g<gridspots.length;g++){
                        gridspotOffset = $(gridspots[g]).offset()
                        dist = distance(gridspotOffset, tilePos)
                        if( mindist == null || dist < mindist ){
                            mindist = dist
                            closest = gridspots[g]
                        }
                    }
                    //tablepost = $('#mainboard').offset();
                    $(document).unbind('mousemove');
                    $(dragItem).removeClass('dragging')
                    if( closest != null && mindist < 40 && ! $(closest).hasClass('occupied') ){
                        $(dragItem).offset({top:$(closest).offset().top, left:$(closest).offset().left}  )
                        $(closest).addClass('occupied')
                    }
                }
            )
        });
        </script> 
	</body>
</html>
